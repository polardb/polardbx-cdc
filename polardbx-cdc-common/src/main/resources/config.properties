#
# 基础配置
#
config_scan_period_second=2
polardbx_instance_id=${maven.polardbx.instance.id}
cluster_id=${maven.cluster_id}
ins_id=${maven.ins_id}
ins_ip=${maven.ins_ip}
daemon_port=${maven.daemon_port}
ssh_port=${maven.ssh_port}
common_ports=${maven.common_ports}
cpu_cores=${maven.cpu_cores}
mem_size=${maven.mem_size}
disk_size=${maven.disk_size}
rds_uid=${maven.rds_uid}
rds_bid=${maven.rds_bid}
rds_api_url=${maven.rds_api_url}
rds_api_access_id=${maven.rds_api_access_id}
rds_api_access_key=${maven.rds_api_access_key}
runtime_mode=${maven.runtime_mode}
print_metrics=${maven.print_metrics}
interface_acl_enabled=false
cluster_type=${maven.cluster_type}
assigned_dn_ip=
dnPasswordKey=${maven.dnPasswordKey}
useEncryptedPassword=false
sigar_enabled=${maven.sigar_enabled}
latest_server_address_persist_file=${maven.latest_server_address_persist_file}
latest_server_address_flush_interval=${maven.latest_server_address_flush_interval}
cluster_role=${maven.cluster_role}
is_lab_env=${maven.is_lab_env}
force_reset_enable=${maven.force_reset_enable}
release_note_path=/home/admin/releaseNote
# Storage相关的参数配置
#
storage_persist_enabled=${maven.storage_persist_enable}
storage_persist_txn_entity_enabled=true
storage_persist_mode=${maven.storage_persist_mode}
storage_persist_all_threshold=0.95
storage_persist_new_threshold=${maven.storage_persist_new_threshold}
storage_persist_check_interval_mills=10
storage_persist_txn_threshold=${maven.storage_persist_txn_threshold}
storage_persist_txnitem_threshold=${maven.storage_persist_txnitem_threshold}
storage_persist_base_path=${maven.storage_persist_base_path}
storage_persist_delete_mode=${maven.storage_persist_delete_mode}
storage_persist_unit_count=${maven.storage_persist_unit_count}
storage_clean_worker_count=${maven.storage_clean_worker_count}
storage_clean_buffer_size=10000
storage_parallel_restore_enabled=true
storage_parallel_restore_parallelism=4
storage_parallel_restore_batch_size=100
storage_parallel_restore_max_event_size=5242880
#
# metadb的数据库配置
#
metaDb_url=${maven.metaDb_url}
metaDb_username=${maven.metaDb_username}
metaDb_password=${maven.metaDb_password}
metadb_scan_switch=${maven.metadb_scan_switch}
metadb_scan_interval_seconds=${maven.metadb_scan_interval_seconds}
#
# polarx server的数据库配置
#
polarx_url=${maven.polarx_url}
polarx_username=${maven.polarx_username}
polarx_password=${maven.polarx_password}
#
# datasource相关
#
datasource_max_active=60
datasource_max_wait=600000
datasource_check_valid_timeout_sec=1
#
# Task和Dumper之间，Txn Stream相关参数
#
binlog_txn_stream_packet_mode=${maven.binlog_txn_stream_packet_mode}
binlog_txn_stream_client_async_enabled=true
binlog_txn_stream_client_receive_queue_size=64
binlog_txn_stream_flow_control_window_size=800
#
# 逻辑Binlog目录&文件&上传下载等相关配置
#
binlog_dir_path=${maven.binlog_dir_path}
binlog_disk_max_size_mb=${maven.binlog_disk_space_max_size_mb}
binlog_file_size=${maven.binlog_file_size}
binlog_file_seek_buffer_size=${maven.binlog_file_seek_buffer_size}
binlog_file_seek_last_tso_mode=0
binlog_write_dry_run_enabled=false
binlog_write_dry_run_mode=1
binlog_write_rows_query_event_enabled=${maven.binlog_write_rows_query_event_enabled}
binlog_write_check_rows_query_event=${maven.binlog_write_check_rows_query_event}
binlog_write_check_server_id=true
binlog_write_check_server_id_target_value=${maven.binlog_write_check_server_id_target_value}
binlog_write_check_tso=true
binlog_write_buffer_size=1048576
binlog_write_buffer_direct_enabled=true
binlog_write_flush_policy=0
binlog_write_flush_interval=1000
binlog_write_heartbeat_interval=30
binlog_write_heartbeat_as_txn=${maven.binlog_write_heartbeat_as_txn}
binlog_write_tableid_base_value=0
binlog_parallel_build_enabled=${maven.binlog_parallel_build_enabled}
binlog_parallel_build_parallelism=1
binlog_parallel_build_with_batch=true
binlog_parallel_build_ring_buffer_size=65536
binlog_parallel_build_max_slot_size=1024
binlog_parallel_build_max_slot_payload_size=8192
binlog_sync_read_buffer_size=1048576
binlog_sync_packet_size=1048576
binlog_sync_client_async_enabled=true
binlog_sync_client_receive_queue_size=64
binlog_sync_flow_control_window_size=800
binlog_sync_event_split_mode=${maven.binlog_sync_event_split_mode}
binlog_sync_inject_trouble_enabled=${maven.binlog_sync_inject_trouble_enabled}
binlog_sync_check_file_status_interval_second=5
binlog_dump_packet_size=2097152
binlog_dump_read_buffer_size=33554432
binlog_dump_master_heartbeat_period=1000000000
binlog_dump_m_event_checksum_alg=CRC32
binlog_dump_check_checksum_alg_switch=true
binlog_dump_back_pressure_sleep_time_us=1000
binlog_dump_wait_cursor_ready_times_limit=6
binlog_dump_wait_cursor_ready_retry_interval_second=5
binlog_dump_test_streaming_consume_enabled=${maven.binlog_dump_test_streaming_consume_enabled}
binlog_dump_force_streaming_consume_enabled=${maven.binlog_dump_force_streaming_consume_enabled}
binlog_dump_download_path=${maven.binlog_dump_download_path}
binlog_dump_download_first_mode=${maven.binlog_dump_download_first_mode}
binlog_dump_download_window_size=${maven.binlog_dump_download_window_size}
binlog_dump_download_error_retry_times=10
binlog_dump_download_max_wait_seconds=500
binlog_backup_type=${maven.binlog_backup_type}
binlog_backup_file_preserve_days=15
binlog_backup_purged_record_preserve_days=7
binlog_backup_upload_mode=MULTI_PART
binlog_backup_upload_buffer_size=1048576
binlog_backup_upload_max_thread_num=32
binlog_backup_upload_multi_append_threshold=4
binlog_backup_upload_part_size=10485760
binlog_backup_upload_wait_data_timeout_ms=10000
binlog_backup_download_mode=PARALLEL
binlog_backup_download_part_size=52428800
binlog_backup_download_max_thread_num=10
binlog_backup_download_last_file_count=1
binlog_backup_force_download_enabled=${maven.binlog_backup_force_download_enabled}
binlog_backup_download_link_preserve_seconds=43200
binlog_purge_check_interval_minute=1
binlog_purge_disk_use_ratio=0.9
binlog_purge_enabled=true
binlog_recover_mode_with_dumper_slave=${maven.binlog_recover_mode_with_dumper_slave}
binlog_recover_tso_overwrite_config=[]
binlog_ddl_set_table_group_enabled=true
binlog_ddl_alter_manually_table_group_enabled=true
binlog_ddl_alter_implicit_table_group_enabled=true
#
# 中心化存储相关参数
#
oss_endpoint=${maven.oss_endpoint}
oss_bucket_name=${maven.oss_bucket_name}
oss_access_key_id=${maven.oss_access_key_id}
oss_access_key_secret=${maven.oss_access_key_secret}
lindorm_endpoint=${maven.lindorm_endpoint}
lindorm_thrift_port=${maven.lindorm_thrift_port}
lindorm_s3_port=${maven.lindorm_s3_port}
lindorm_bucket_name=${maven.lindorm_bucket_name}
lindorm_access_key_id=${maven.lindorm_access_key_id}
lindorm_access_key_secret=${maven.lindorm_access_key_secret}
#
# Daemon和拓扑相关的配置
#
daemon_heartbeat_interval_ms=${maven.daemon_heartbeat_interval_ms}
daemon_watch_cluster_interval_ms=${maven.daemon_watch_cluster_interval_ms}
daemon_watch_cluster_heartbeat_timeout_ms=${maven.daemon_watch_cluster_heartbeat_timeout_ms}
daemon_watch_cluster_wait_start_timeout_ms=${maven.daemon_watch_cluster_wait_start_timeout_ms}
daemon_watch_work_process_interval_ms=${maven.daemon_watch_work_process_interval_ms}
daemon_watch_work_process_heartbeat_timeout_ms=${maven.daemon_watch_work_process_heartbeat_timeout_ms}
daemon_watch_work_process_blacklist=MysqlDumpStressTest
daemon_watch_history_resource_interval_minute=${maven.daemon_watch_history_resource_interval_minute}
daemon_watch_replica_in_binlog_cluster_enabled=${maven.daemon_watch_replica_in_binlog_cluster_enabled}
daemon_tso_heartbeat_interval_ms=${maven.daemon_tso_heartbeat_interval_ms}
daemon_tso_heartbeat_self_adaption_enabled=false
daemon_tso_heartbeat_self_adaption_target_interval=10
daemon_tso_heartbeat_self_adaption_eps_threshold=300000
daemon_rest_api_acl_ak=${maven.daemon_rest_api_acl_ak}
daemon_rest_api_acl_sk=${maven.daemon_rest_api_acl_sk}
daemon_force_refresh_topology_interval=${maven.daemon_force_refresh_topology_interval}
daemon_support_refresh_topology_only_daemon_down=false
daemon_wait_task_start_timeout_second=${maven.daemon_wait_task_start_timeout_second}
daemon_wait_task_stop_timeout_second=${maven.daemon_wait_task_stop_timeout_second}
daemon_wait_clean_binlog_timeout_second=${maven.daemon_wait_clean_binlog_timeout_second}
# ON / OFF
daemon_dn_health_checker_switch=ON
daemon_dn_health_checker_interval=10
daemon_dn_health_checker_connection_timeout_second=30
daemon_dn_health_checker_sla_limit_second=120
# 开启异常注入
daemon_dn_health_checker_error_inject=${maven.daemon_dn_health_checker_error_inject}
daemon_dn_health_checker_retry_num=${maven.daemon_dn_health_checker_retry_num}
# 开启定时flush log测试
daemon_auto_flush_log_test=${maven.daemon_auto_flush_log_test}
topology_node_minsize=${maven.topology_node_minsize}
topology_work_process_heartbeat_interval_ms=${maven.topology_work_process_heartbeat_interval_ms}
topology_use_relay_task_threshold_with_dn_num=1024
topology_resource_use_ratio=${maven.topology_resource_use_ratio}
topology_resource_dumper_weight=${maven.topology_resource_dumper_weight}
topology_resource_dumper_slave_max_mem=8192
topology_resource_task_weight=${maven.topology_resource_task_weight}
topology_repair_storage_with_scale_enabled=${maven.topology_repair_storage_with_scale_enabled}
topology_recover_tso_type=${maven.topology_recover_tso_type}
topology_recover_tso_time_limit=${maven.topology_recover_tso_time_limit}
topology_recover_tso_binlog_num_limit=${maven.topology_recover_tso_binlog_num_limit}
topology_force_use_recover_tso_enabled=${maven.topology_force_use_recover_tso_enabled}
columnar_process_heartbeat_timeout_ms=${maven.columnar_process_heartbeat_timeout_ms}
#
# Task相关的配置
#
task_engine_auto_start=false
task_merge_xa_without_tso=false
task_merge_dry_run=false
task_merge_dry_run_mode=1
task_merge_group_unit_size=8
task_merge_group_queue_size=256
task_merge_group_max_level=2
task_merge_source_queue_size=512
task_merge_source_queue_max_total_size=20480
task_merge_force_complete_heartbeat_window_time_limit=10
task_merge_check_heartbeat_window_enabled=true
task_transmit_dry_run=false
task_transmit_dry_run_mode=1
task_transmit_chunk_mode=MEMSIZE
task_transmit_chunk_item_size=10240
task_transmit_max_message_size=104857600
task_transmit_queue_size=1024
task_transmit_dumping_queue_size=64
task_collect_merge_stage_parallelism=4
task_collect_build_packet_size_limit=65536
task_collect_queue_size=8192
task_extract_log_trans=${maven.task_extract_log_trans}
task_extract_log_trans_detail=${maven.task_extract_log_trans_detail}
task_extract_log_event=false
task_extract_remove_hints_in_ddl_sql=${maven.task_extract_remove_hints_in_ddl_sql}
task_extract_skip_duplicate_txn_key=false
task_extract_filter_logic_table_blacklist=
task_extract_filter_logic_db_blacklist=
task_extract_filter_physical_table_blacklist=
task_extract_filter_trans_blacklist=
task_extract_filter_trans_threshold=500
task_extract_disorder_trace_id_allowed=false
task_extract_sort_hold_size=-1
task_extract_transaction_group_size=10000
task_extract_watch_memory_leak_enabled=false
task_extract_rebuild_data_log=${maven.task_extract_rebuild_data_log}
task_reformat_column_type_enabled=true
task_reformat_attach_private_ddl_enabled=true
task_reformat_attach_drds_hidden_pk_enabled=false
task_reformat_ignore_mismatched_column_error=false
task_reformat_event_force_enabled=false
task_reformat_ddl_algorithm_blacklist=OMC,OMC_INDEX
task_reformat_ddl_hint_blacklist=GSI_BACKFILL_POSITION_MARK,FP_PAUSE_AFTER_DDL_TASK_EXECUTION,FP_STATISTIC_SAMPLE_ERROR
task_reformat_no_foreign_key_check=true
task_dump_offline_binlog_forced=false
task_dump_offline_binlog_recall_days_limit=10
task_dump_offline_binlog_prefer_host_instances=
task_dump_offline_binlog_in_download_mode=false
task_dump_offline_binlog_download_dir=${maven.task_dump_offline_binlog_download_dir}
task_dump_offline_binlog_download_thread_init_num=3
task_dump_offline_binlog_download_thread_max_num=10
task_dump_offline_binlog_download_disk_limit_per_dn=5120
task_dump_offline_binlog_download_disk_limit_total=204800
task_dump_offline_binlog_cache_mode=AUTO
task_dump_offline_binlog_cache_unit_size=31457280
task_dump_offline_binlog_cache_size_limit=566231040
task_dump_same_region_storage_binlog=true
task_recover_check_previous_dn_change=false
task_recover_search_tso_in_quick_mode=${maven.task_recover_search_tso_in_quick_mode}
task_recover_force_quick_search_when_loss_backup=true
task_recover_search_tso_with_v1_algorithm=false
#
# 报警相关的参数配置
#
alarm_nodata_threshold_second=120
alarm_delay_threshold_second=300
alarm_report_alarm_event_enabled=true
alarm_latest_consume_time_ms=0
alarm_check_consumer_interval_ms=60000
alarm_fatal_threshold_ms=7200000
#
# meta相关的控制参数
#
meta_recover_rollback_mode=${maven.meta_recover_rollback_mode}
meta_recover_force_use_snapshot_exactly_mode=false
meta_retrieve_instant_create_table_modes=SNAPSHOT_SEMI,SNAPSHOT_UNSAFE
meta_build_check_consistency_enabled=${maven.meta_build_check_consistency_enabled}
meta_build_log_table_meta_detail_enabled=false
meta_build_semi_snapshot_enabled=true
meta_build_semi_snapshot_preserve_hours=${maven.meta_build_semi_snapshot_preserve_hours}
meta_build_semi_snapshot_check_delta_interval_sec=60
meta_build_apply_from_history_first=false
meta_build_full_snapshot_threshold=${maven.meta_build_full_snapshot_threshold}
meta_build_snapshot_retry_times=${maven.meta_build_snapshot_retry_times}
meta_build_full_snapshot_check_interval_sec=${maven.meta_build_full_snapshot_check_interval_sec}
meta_build_record_sql_with_exists_enabled=false
meta_build_physical_ddl_sql_blacklist_regex=^(create|alter|drop)\\s+table\\s+(`)?(__drds_global_tx_log|polarx_global_trx_log)(`)?(\\s*\\(|\\s+).*,^create\\s+(definer\\s*=\\s*('|`)\\w+('|`)@('|`)[\\w|\\.|%]+('|`)\\s+)?(function|procedure)\\s+.*,^create\\s+sequence.*,^drop\\s+sequence.*,^drop\\s+procedure.*,^drop\\s+function.*,^alter\\s+user\\s+.*,^grant\\s+.*,^savepoint.*,^rollback\\s+(work\\s+)?to\\s+savepoint.*,^release\\s+savepoint.*
meta_build_logic_ddl_db_blacklist=polardbx
meta_build_logic_ddl_table_blacklist=
meta_build_logic_ddl_tso_blacklist=
meta_build_share_topology_enabled=${maven.meta_build_share_topology_enabled}
meta_build_share_topology_with_intern=false
meta_build_ignore_apply_error=false
meta_build_snapshot_error_inject=${maven.meta_build_snapshot_error_inject}
meta_build_record_ignored_ddl_enabled=${maven.meta_build_record_ignored_ddl_enabled}
meta_alarm_logic_ddl_count_threshold=100000
meta_alarm_physical_ddl_count_threshold=500000
meta_purge_physical_ddl_threshold=500000
meta_purge_mark_ddl_threshold=${maven.meta_purge_mark_ddl_threshold}
meta_purge_logic_ddl_soft_delete_enabled=${maven.meta_purge_logic_ddl_soft_delete_enabled}
meta_persist_base_path=${maven.meta_persist_base_path}
meta_persist_enabled=${maven.meta_persist_enabled}
meta_cache_compare_result_enabled=true
meta_cache_table_meta_max_size=8192
meta_cache_table_meat_expire_time_minutes=60
meta_write_all_variable_to_db_switch=false
#
# FlashBack相关的参数
#
flashback_binlog_files_count_per_task=5
flashback_binlog_write_buffer_sql_size=163840
flashback_binlog_write_buffer_byte_size=536870912
flashback_binlog_download_dir=${maven.flashback_binlog_download_dir}
flashback_binlog_max_download_file_count=200
flashback_binlog_download_thread_num=10
flashback_download_link_preserve_second=1296000
flashback_upload_multi_mode_threshold=5368709120
#
# Binlog-X相关参数
#
binlogx_rocksdb_base_path=${maven.binlogx_rocksdb_base_path}
binlogx_auto_init=${maven.binlogx_auto_init}
binlogx_stream_group_name=${maven.binlogx.stream.group.name}
binlogx_stream_count=${maven.binlogx.stream.count}
binlogx_dir_path_prefix=${maven.binlogx_dir_path_prefix}
binlogx_wait_latest_tso_timeout_second=30
binlogx_schedule_dispatcher_count_per_node=1
binlogx_schedule_dispatcher_memory_unit=10240
binlogx_schedule_dispatcher_memory_min=1024
binlogx_schedule_dispatcher_rocksdb_ratio=0.1
binlogx_transmit_relay_engine_type=${maven.binlogx_transmit_relay_engine_type}
binlogx_transmit_relay_file_max_size=104857600
binlogx_transmit_read_batch_item_size=200
binlogx_transmit_read_batch_byte_size=10485760
binlogx_transmit_read_file_buffer_size=1048576
binlogx_transmit_read_log_detail_enabled=${maven.binlogx_transmit_read_log_detail_enabled}
binlogx_transmit_write_batch_size=100
binlogx_transmit_write_parallelism=4
binlogx_transmit_write_queue_size=256
binlogx_transmit_write_file_buffer_size=1048576
binlogx_transmit_write_file_buffer_use_direct_mem=true
binlogx_transmit_write_file_flush_interval_ms=100
binlogx_transmit_write_slowdown_threshold=250
binlogx_transmit_write_slowdown_speed=1048576
binlogx_transmit_write_stop_threshold=500
binlogx_transmit_write_log_detail_enabled=${maven.binlogx.transmit.write.logDetail.enable}
binlogx_transmit_hash_level=${maven.binlogx.transmit.hashLevel}
binlogx_record_level_hash_db_list=${maven.binlogx.useRecordLevelHash.dbList}
binlogx_record_level_hash_table_list=${maven.binlogx.useRecordLevelHash.tableList}
binlogx_db_level_hash_db_list=${maven.binlogx.useDbLevelHash.dbList}
binlogx_db_level_hash_table_list=${maven.binlogx.useDbLevelHash.tableList}
binlogx_table_level_hash_db_list=${maven.binlogx.useTableLevelHash.dbList}
binlogx_table_level_hash_table_list=${maven.binlogx.useTableLevelHash.tableList}
binlogx_table_level_hash_table_list_regex=${maven.binlogx_useTableLevelHash_tableList_regex}
binlogx_clean_old_version_binlog_enabled=${maven.binlogx.clean.oldVersionBinlog.enable}
binlogx_clean_relay_data_enabled=${maven.binlogx.clean.relayData.enable}
binlogx_clean_relay_data_interval_minute=1
binlogx_txn_stream_flow_control_window_max_size=1000
binlogx_file_seek_buffer_max_total_size=512
binlogx_kway_source_queue_size=128
#
# Replica相关参数
#
rpl_persist_base_path=/home/admin/logs/rocksdb_rpl/
rpl_task_support_running_check=true
rpl_single_task_memory_when_distribute=1500
rpl_random_compare_all=${maven.rpl_random_compare_all}
rpl_rocksdb_deserialize_parallelism=1
rpl_default_ignore_db_list=sys,mysql,information_schema
rpl_default_sql_mode=NO_AUTO_VALUE_ON_ZERO
rpl_pool_cn_black_ip_list=
rpl_task_keep_alive_interval_seconds=72000
# 同时影响闪回和replica
rpl_filter_table_error=false
rpl_persist_schema_meta_enabled=OFF
rpl_table_meta_max_cache_size=8192
rpl_table_meta_expire_time_minutes=60
rpl_state_metrics_flush_interval_second=5
rpl_ddl_retry_interval_mills=1000
rpl_ddl_retry_max_count=20
rpl_ddl_wait_align_interval_mills=50
rpl_ddl_apply_columnar_enabled=false
rpl_delay_alarm_threshold_second=900
rpl_ddl_parse_error_process_mode=0
rpl_error_sql_truncate_length=300
rpl_full_valid_min_batch_rows_count=5000000
rpl_full_valid_min_batch_byte_size=100000000
rpl_full_valid_batch_size=1000000
rpl_full_valid_max_sample_percentage=1.0
rpl_full_valid_max_sample_rows_count=100000
rpl_full_valid_parallelism=1
rpl_full_valid_max_persist_rows_count=5000000
rpl_full_valid_records_per_second=1000000
rpl_repair_parallelism=20
rpl_full_valid_skip_collect_statistic=false
rpl_full_valid_auto_reset_error_tasks=true
rpl_set_max_statement_time_option=false
rpl_async_ddl_enabled=false
rpl_async_ddl_threshold_in_second=${maven.rpl_async_ddl_threshold_in_second}
rpl_parallel_schema_apply_enabled=${maven.rpl_parallel_schema_apply_enabled}
rpl_parallel_schema_channel_enabled=true
rpl_parallel_schema_channel_parallelism=10000
rpl_parallel_schema_apply_batch_size=32768
rpl_parallel_table_apply_enabled=${maven.rpl_parallel_table_apply_enabled}
rpl_connection_init_sql=set enable_auto_savepoint = true;set foreign_key_checks = 0;set enable_foreign_key = true;set enable_create_expression_index = true;set enable_unique_key_on_gen_col=true;set transaction_policy = 'XA';
rpl_apply_use_cached_thread_pool_enabled=${maven.rpl_apply_use_cached_thread_pool_enabled}
rpl_default_memory=${maven.rpl_default_memory}
rpl_full_valid_max_batch_rows_count=10000000
rpl_full_valid_max_batch_size=500000000
rpl_full_valid_runner_thread_pool_core_size=10
rpl_full_valid_runner_thread_pool_max_size=20
rpl_full_valid_runner_thread_pool_keep_alive_time_seconds=120
rpl_full_valid_runner_thread_pool_queue_size=1024
rpl_full_valid_cn_conn_pool_count=10
rpl_full_valid_mock_sample=${maven.rpl_full_valid_mock_sample}
rpl_full_valid_check_detail_fetch_size=1024
rpl_extractor_ddl_log_open=${maven.rpl_extractor_ddl_log_open}
#
# 实验室相关参数
#
# 开启action log表配置支持
test_open_binlog_lab_event_support=${maven.test_open_binlog_lab_event_support}
